<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}  
     <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" > 
     <link href="{% static 'css/school.css' %}" rel="stylesheet">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
     <style>
        /* Add your styles here */
        .fa-eye-slash {
            display: none;
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat App</title>
</head>
<body class="chat_body">
   <div class="chat-container">
       
       <div class="chat_header border_right">

            <div class="chat_header_top">

                <div class="chat_header_top_icon selected" onclick="toggleDrawer('chat_drawer_open', this)">
                    <i class="fa-brands fa-facebook-messenger" style="color: #aebac1;"></i>
                </div>

                <div class="chat_header_top_icon"  onclick="toggleDrawer('status_story', this)">
                    <i class="fa-solid fa-circle-radiation" style="color: #aebac1;"></i>
                </div>
                        
            </div>
            <div class="chat_header_bottom">
                <div class="chat_header_userimg"  onclick="toggleDrawer('user_profile', this)">
                    {% if user.is_authenticated %}
                    {% if user.profile_image %}
                        <img src="{{user.profile_image.url}}" >
                    {% elif user.google_profile_image %}
                        <img src="{{user.google_profile_image }}" >
                    {% else %}
                        <img src="/static/images/profile.png" >
                    {% endif %}
                {% endif %}
                </div>
            </div>

       </div> 

       <div class="leftside">

            <div class="leftside_first">

                <!-- chat header -->
                <div class="chat-header">
                    
                    <div class="chat_header_text">
                        <h1>Chats</h1>
                    </div>
                

                    <ul class="nav_icons">

                        <li><span id="createfriend"><svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>new-chat-outline</title><path d="M9.53277 12.9911H11.5086V14.9671C11.5086 15.3999 11.7634 15.8175 12.1762 15.9488C12.8608 16.1661 13.4909 15.6613 13.4909 15.009V12.9911H15.4672C15.9005 12.9911 16.3181 12.7358 16.449 12.3226C16.6659 11.6381 16.1606 11.0089 15.5086 11.0089H13.4909V9.03332C13.4909 8.60007 13.2361 8.18252 12.8233 8.05119C12.1391 7.83391 11.5086 8.33872 11.5086 8.991V11.0089H9.49088C8.83941 11.0089 8.33411 11.6381 8.55097 12.3226C8.68144 12.7358 9.09947 12.9911 9.53277 12.9911Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.944298 5.52617L2.99998 8.84848V17.3333C2.99998 18.8061 4.19389 20 5.66665 20H19.3333C20.8061 20 22 18.8061 22 17.3333V6.66667C22 5.19391 20.8061 4 19.3333 4H1.79468C1.01126 4 0.532088 4.85997 0.944298 5.52617ZM4.99998 8.27977V17.3333C4.99998 17.7015 5.29845 18 5.66665 18H19.3333C19.7015 18 20 17.7015 20 17.3333V6.66667C20 6.29848 19.7015 6 19.3333 6H3.58937L4.99998 8.27977Z" fill="currentColor"></path></svg></span></li>
                        <li style="margin-left: 20px;"><span><svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>more-refreshed</title><path d="M12 20C11.45 20 10.9792 19.8042 10.5875 19.4125C10.1958 19.0208 10 18.55 10 18C10 17.45 10.1958 16.9792 10.5875 16.5875C10.9792 16.1958 11.45 16 12 16C12.55 16 13.0208 16.1958 13.4125 16.5875C13.8042 16.9792 14 17.45 14 18C14 18.55 13.8042 19.0208 13.4125 19.4125C13.0208 19.8042 12.55 20 12 20ZM12 14C11.45 14 10.9792 13.8042 10.5875 13.4125C10.1958 13.0208 10 12.55 10 12C10 11.45 10.1958 10.9792 10.5875 10.5875C10.9792 10.1958 11.45 10 12 10C12.55 10 13.0208 10.1958 13.4125 10.5875C13.8042 10.9792 14 11.45 14 12C14 12.55 13.8042 13.0208 13.4125 13.4125C13.0208 13.8042 12.55 14 12 14ZM12 8C11.45 8 10.9792 7.80417 10.5875 7.4125C10.1958 7.02083 10 6.55 10 6C10 5.45 10.1958 4.97917 10.5875 4.5875C10.9792 4.19583 11.45 4 12 4C12.55 4 13.0208 4.19583 13.4125 4.5875C13.8042 4.97917 14 5.45 14 6C14 6.55 13.8042 7.02083 13.4125 7.4125C13.0208 7.80417 12.55 8 12 8Z" fill="currentColor"></path></svg></span></li>
                    </ul>


                </div>

                <!-- search -->
                <div class="search_chat">
                    <div>

                        <span class="search_icon"><svg  viewBox="0 0 20 20" height="20" width="20" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>search-refreshed-thin</title><path fill-rule="evenodd" clip-rule="evenodd" d="M4.36653 4.3664C5.36341 3.36953 6.57714 2.87 8.00012 2.87C9.42309 2.87 10.6368 3.36953 11.6337 4.3664C12.6306 5.36329 13.1301 6.57724 13.1301 8.00062C13.1301 8.57523 13.0412 9.11883 12.8624 9.63057C12.6972 10.1038 12.4733 10.5419 12.1909 10.9444L16.5712 15.3247C16.7454 15.4989 16.8385 15.7046 16.8385 15.9375C16.8385 16.1704 16.7454 16.3761 16.5712 16.5503C16.396 16.7254 16.1866 16.8175 15.948 16.8175C15.7095 16.8175 15.5001 16.7254 15.3249 16.5503L10.9448 12.1906C10.5421 12.4731 10.104 12.697 9.63069 12.8623C9.11895 13.041 8.57535 13.13 8.00074 13.13C6.57736 13.13 5.36341 12.6305 4.36653 11.6336C3.36965 10.6367 2.87012 9.42297 2.87012 8C2.87012 6.57702 3.36965 5.36328 4.36653 4.3664ZM8.00012 4.63C7.06198 4.63 6.26877 4.95685 5.61287 5.61275C4.95698 6.26865 4.63012 7.06186 4.63012 8C4.63012 8.93813 4.95698 9.73134 5.61287 10.3872C6.26877 11.0431 7.06198 11.37 8.00012 11.37C8.93826 11.37 9.73146 11.0431 10.3874 10.3872C11.0433 9.73134 11.3701 8.93813 11.3701 8C11.3701 7.06186 11.0433 6.26865 10.3874 5.61275C9.73146 4.95685 8.93826 4.63 8.00012 4.63Z" fill="currentColor"></path></svg></span>
                        <input type="text" id="search-input" placeholder="Search or start new chat">        
                        <span class="search-close" id="search-close"><svg viewBox="0 0 24 24" height="20" width="20" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>close-refreshed</title><path d="M11.9998 13.4L7.0998 18.3C6.91647 18.4833 6.68314 18.575 6.3998 18.575C6.11647 18.575 5.88314 18.4833 5.6998 18.3C5.51647 18.1167 5.4248 17.8833 5.4248 17.6C5.4248 17.3167 5.51647 17.0833 5.6998 16.9L10.5998 12L5.6998 7.09999C5.51647 6.91665 5.4248 6.68332 5.4248 6.39999C5.4248 6.11665 5.51647 5.88332 5.6998 5.69999C5.88314 5.51665 6.11647 5.42499 6.3998 5.42499C6.68314 5.42499 6.91647 5.51665 7.0998 5.69999L11.9998 10.6L16.8998 5.69999C17.0831 5.51665 17.3165 5.42499 17.5998 5.42499C17.8831 5.42499 18.1165 5.51665 18.2998 5.69999C18.4831 5.88332 18.5748 6.11665 18.5748 6.39999C18.5748 6.68332 18.4831 6.91665 18.2998 7.09999L13.3998 12L18.2998 16.9C18.4831 17.0833 18.5748 17.3167 18.5748 17.6C18.5748 17.8833 18.4831 18.1167 18.2998 18.3C18.1165 18.4833 17.8831 18.575 17.5998 18.575C17.3165 18.575 17.0831 18.4833 16.8998 18.3L11.9998 13.4Z" fill="currentColor"></path></svg></span>
                
                    </div>
                </div>

                <!-- chat list -->
                <div class="chatlist" id="chatlist">
                    {% for user in  user_data %}
                    {{ user_data|json_script:"user-data" }}
                    <div class="block" >
                        <div class="inside" data-user-id="{{user.id}}">
                            <div class="imgbox">
                                {% if user.profile_image %}
                                    <img src="{{user.profile_image}}" class="cover">
                                {% elif user.google_profile_image %}
                                    <img src="{{user.google_profile_image }}" class="cover">
                                {% else %}
                                    <img src="/static/images/profile.png" class="cover">
                                {% endif %}
                                
                            </div>    
                            <div class="details">
                                <div class="listHead">
                                    <h4>{{user.username}}</h4>
                                    <p class="time">{{user.last_msg_time}}</p>
                                </div>
                                <div class="message_p">
                                    {% if user.last_msg != '' %}
                                        <p>{{user.last_msg}}</p>
                                    {% else %}
                                        <p>"Messages are end-to-end encrypted. No one outside of this chat, not even WhatsApp, can read or listen to them. Click to learn more"</p>
                                    {% endif %}
                                    
                                    {% if user.toggle_count > 0 %}
                                        <b class="toggle-count">{{user.toggle_count}}</b>
                                    {% endif %}
                                    
                                </div>
                            </div>                        
                        </div>
                    </div>
                    
                    {% endfor %}
                </div>


            </div>

            <!-- New Drawer for contacts/Settings -->
            <div class="leftside-drawer border_left" id="leftsideDrawer">
                
                <div class="drawer-header">
                    <span id="drawer-close" ><svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>back-refreshed</title><path d="M7.8248 13L12.7248 17.9C12.9248 18.1 13.0206 18.3333 13.0123 18.6C13.004 18.8667 12.8998 19.1 12.6998 19.3C12.4998 19.4833 12.2665 19.5792 11.9998 19.5875C11.7331 19.5958 11.4998 19.5 11.2998 19.3L4.6998 12.7C4.5998 12.6 4.52897 12.4917 4.4873 12.375C4.44564 12.2583 4.4248 12.1333 4.4248 12C4.4248 11.8667 4.44564 11.7417 4.4873 11.625C4.52897 11.5083 4.5998 11.4 4.6998 11.3L11.2998 4.69999C11.4831 4.51665 11.7123 4.42499 11.9873 4.42499C12.2623 4.42499 12.4998 4.51665 12.6998 4.69999C12.8998 4.89999 12.9998 5.13749 12.9998 5.41249C12.9998 5.68749 12.8998 5.92499 12.6998 6.12499L7.8248 11H18.9998C19.2831 11 19.5206 11.0958 19.7123 11.2875C19.904 11.4792 19.9998 11.7167 19.9998 12C19.9998 12.2833 19.904 12.5208 19.7123 12.7125C19.5206 12.9042 19.2831 13 18.9998 13H7.8248Z" fill="currentColor"></path></svg></span>
                    <h1>Receive User</h1>
                </div>

                <div class="search_chat">
                    <div>
                        <span class="search_icon"><svg viewBox="0 0 20 20" height="20" width="20" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>search-refreshed-thin</title><path fill-rule="evenodd" clip-rule="evenodd" d="M4.36653 4.3664C5.36341 3.36953 6.57714 2.87 8.00012 2.87C9.42309 2.87 10.6368 3.36953 11.6337 4.3664C12.6306 5.36329 13.1301 6.57724 13.1301 8.00062C13.1301 8.57523 13.0412 9.11883 12.8624 9.63057C12.6972 10.1038 12.4733 10.5419 12.1909 10.9444L16.5712 15.3247C16.7454 15.4989 16.8385 15.7046 16.8385 15.9375C16.8385 16.1704 16.7454 16.3761 16.5712 16.5503C16.396 16.7254 16.1866 16.8175 15.948 16.8175C15.7095 16.8175 15.5001 16.7254 15.3249 16.5503L10.9448 12.1906C10.5421 12.4731 10.104 12.697 9.63069 12.8623C9.11895 13.041 8.57535 13.13 8.00074 13.13C6.57736 13.13 5.36341 12.6305 4.36653 11.6336C3.36965 10.6367 2.87012 9.42297 2.87012 8C2.87012 6.57702 3.36965 5.36328 4.36653 4.3664ZM8.00012 4.63C7.06198 4.63 6.26877 4.95685 5.61287 5.61275C4.95698 6.26865 4.63012 7.06186 4.63012 8C4.63012 8.93813 4.95698 9.73134 5.61287 10.3872C6.26877 11.0431 7.06198 11.37 8.00012 11.37C8.93826 11.37 9.73146 11.0431 10.3874 10.3872C11.0433 9.73134 11.3701 8.93813 11.3701 8C11.3701 7.06186 11.0433 6.26865 10.3874 5.61275C9.73146 4.95685 8.93826 4.63 8.00012 4.63Z" fill="currentColor"></path></svg></span>
                        <input type="text" id="drawer-search-input" placeholder="Search or start new chat">
                        <span class="search-close" id="drawer-search-close"><svg viewBox="0 0 24 24" height="20" width="20" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>close-refreshed</title><path d="M11.9998 13.4L7.0998 18.3C6.91647 18.4833 6.68314 18.575 6.3998 18.575C6.11647 18.575 5.88314 18.4833 5.6998 18.3C5.51647 18.1167 5.4248 17.8833 5.4248 17.6C5.4248 17.3167 5.51647 17.0833 5.6998 16.9L10.5998 12L5.6998 7.09999C5.51647 6.91665 5.4248 6.68332 5.4248 6.39999C5.4248 6.11665 5.51647 5.88332 5.6998 5.69999C5.88314 5.51665 6.11647 5.42499 6.3998 5.42499C6.68314 5.42499 6.91647 5.51665 7.0998 5.69999L11.9998 10.6L16.8998 5.69999C17.0831 5.51665 17.3165 5.42499 17.5998 5.42499C17.8831 5.42499 18.1165 5.51665 18.2998 5.69999C18.4831 5.88332 18.5748 6.11665 18.5748 6.39999C18.5748 6.68332 18.4831 6.91665 18.2998 7.09999L13.3998 12L18.2998 16.9C18.4831 17.0833 18.5748 17.3167 18.5748 17.6C18.5748 17.8833 18.4831 18.1167 18.2998 18.3C18.1165 18.4833 17.8831 18.575 17.5998 18.575C17.3165 18.575 17.0831 18.4833 16.8998 18.3L11.9998 13.4Z" fill="currentColor"></path></svg></span>
                    </div>
                </div>

                <div class="drwer-chatlist" id="drwer-chatlist">
               
                </div>

                <button id="addUserBtn" class="add-user-btn">+</button>

            </div>

            <!-- New Drawer for create new contact -->
            <div class="leftside-drawer border_left" id="adduserDrawer">

                <div class="drawer-header">
                    <span id="adduser-drawer-close"><svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>back-refreshed</title><path d="M7.8248 13L12.7248 17.9C12.9248 18.1 13.0206 18.3333 13.0123 18.6C13.004 18.8667 12.8998 19.1 12.6998 19.3C12.4998 19.4833 12.2665 19.5792 11.9998 19.5875C11.7331 19.5958 11.4998 19.5 11.2998 19.3L4.6998 12.7C4.5998 12.6 4.52897 12.4917 4.4873 12.375C4.44564 12.2583 4.4248 12.1333 4.4248 12C4.4248 11.8667 4.44564 11.7417 4.4873 11.625C4.52897 11.5083 4.5998 11.4 4.6998 11.3L11.2998 4.69999C11.4831 4.51665 11.7123 4.42499 11.9873 4.42499C12.2623 4.42499 12.4998 4.51665 12.6998 4.69999C12.8998 4.89999 12.9998 5.13749 12.9998 5.41249C12.9998 5.68749 12.8998 5.92499 12.6998 6.12499L7.8248 11H18.9998C19.2831 11 19.5206 11.0958 19.7123 11.2875C19.904 11.4792 19.9998 11.7167 19.9998 12C19.9998 12.2833 19.904 12.5208 19.7123 12.7125C19.5206 12.9042 19.2831 13 18.9998 13H7.8248Z" fill="currentColor"></path></svg></span>
                    <h1>Add User</h1>
                </div>

                <div class="scrollable-content">
                    <div class="addUserRe">
                        <div class="search_div">
                            <h6>Add receive message user...!</h6>
                            <input type="email" id="drawer-email-input" placeholder="Email Id">
                        </div>
                    </div>
    
                    <button type="submit" class="save-btn" id="save-btn">Save</button>
    
                </div>

               
            </div>


              <!-- New Drawer for Status -->
            <div class="leftside-drawer border_left" id="status_story">
                
                <div class="status-drawer-header">
                    <h1>Status</h1>
                    <ul class="drawer-header_nav_icons">
                        <li id="topheader-add-status">
                            <span>
                                <svg viewBox="0 0 24 24" width="30" preserveAspectRatio="xMidYMid meet" class="x11xpdln x1d8287x x1h4ghdb"><title>plus</title><path fill="currentColor" d="M19,13h-6v6h-2v-6H5v-2h6V5h2v6h6V13z"></path></svg>
                            </span>
                        </li>
                        <li>
                            <span aria-hidden="true" data-icon="more-refreshed" class=""><svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>more-refreshed</title><path d="M12 20C11.45 20 10.9792 19.8042 10.5875 19.4125C10.1958 19.0208 10 18.55 10 18C10 17.45 10.1958 16.9792 10.5875 16.5875C10.9792 16.1958 11.45 16 12 16C12.55 16 13.0208 16.1958 13.4125 16.5875C13.8042 16.9792 14 17.45 14 18C14 18.55 13.8042 19.0208 13.4125 19.4125C13.0208 19.8042 12.55 20 12 20ZM12 14C11.45 14 10.9792 13.8042 10.5875 13.4125C10.1958 13.0208 10 12.55 10 12C10 11.45 10.1958 10.9792 10.5875 10.5875C10.9792 10.1958 11.45 10 12 10C12.55 10 13.0208 10.1958 13.4125 10.5875C13.8042 10.9792 14 11.45 14 12C14 12.55 13.8042 13.0208 13.4125 13.4125C13.0208 13.8042 12.55 14 12 14ZM12 8C11.45 8 10.9792 7.80417 10.5875 7.4125C10.1958 7.02083 10 6.55 10 6C10 5.45 10.1958 4.97917 10.5875 4.5875C10.9792 4.19583 11.45 4 12 4C12.55 4 13.0208 4.19583 13.4125 4.5875C13.8042 4.97917 14 5.45 14 6C14 6.55 13.8042 7.02083 13.4125 7.4125C13.0208 7.80417 12.55 8 12 8Z" fill="currentColor"></path></svg></span>
                        </li>
                    </ul>
                </div>

                <div class="small-drawer-status" id="small-drawer-status">
                    <ul style="margin-bottom: 0;">

                        <li>         
                            <label for="pho-vid-input">
                                <div class="small-drawer-status-box">
                                    <div class="small-drawer-status-icon">
                                        <svg viewBox="0 0 20 20" height="20" width="20" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>media-multiple</title><path fill-rule="evenodd" clip-rule="evenodd" d="M20 14V2C20 0.9 19.1 0 18 0H6C4.9 0 4 0.9 4 2V14C4 15.1 4.9 16 6 16H18C19.1 16 20 15.1 20 14ZM9.4 10.53L11.03 12.71L13.61 9.49C13.81 9.24 14.19 9.24 14.39 9.49L17.35 13.19C17.61 13.52 17.38 14 16.96 14H7C6.59 14 6.35 13.53 6.6 13.2L8.6 10.53C8.8 10.27 9.2 10.27 9.4 10.53ZM0 18V5C0 4.45 0.45 4 1 4C1.55 4 2 4.45 2 5V17C2 17.55 2.45 18 3 18H15C15.55 18 16 18.45 16 19C16 19.55 15.55 20 15 20H2C0.9 20 0 19.1 0 18Z" fill="currentColor"></path></svg>
                                    </div>
                                    <div class="small-drawer-status-content">Photos & Videos</div>
                                </div>
                            </label>
                            <input type="file" id="pho-vid-input" accept="image/*,video/mp4,video/3gpp,video/quicktime" multiple="" style="display: none;" onchange="handlePhotoAndVideoCapture(event);">
                        </li>

                        <li>
                            <div class="small-drawer-status-box">
                                    <div class="small-drawer-status-icon">
                                            <svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>video-call</title><path d="M3.27096 7.31042C3 7.82381 3 8.49587 3 9.84V14.16C3 15.5041 3 16.1762 3.27096 16.6896C3.5093 17.1412 3.88961 17.5083 4.35738 17.7384C4.88916 18 5.58531 18 6.9776 18H13.1097C14.502 18 15.1982 18 15.7299 17.7384C16.1977 17.5083 16.578 17.1412 16.8164 16.6896C17.0873 16.1762 17.0873 15.5041 17.0873 14.16V9.84C17.0873 8.49587 17.0873 7.82381 16.8164 7.31042C16.578 6.85883 16.1977 6.49168 15.7299 6.26158C15.1982 6 14.502 6 13.1097 6H6.9776C5.58531 6 4.88916 6 4.35738 6.26158C3.88961 6.49168 3.5093 6.85883 3.27096 7.31042Z" fill="currentColor"></path><path d="M18.7308 9.60844C18.5601 9.75994 18.4629 9.97355 18.4629 10.1974V13.8026C18.4629 14.0264 18.5601 14.2401 18.7308 14.3916L20.9567 16.3669C21.4879 16.8384 22.3462 16.4746 22.3462 15.778V8.22203C22.3462 7.52542 21.4879 7.16163 20.9567 7.63306L18.7308 9.60844Z" fill="currentColor"></path></svg>
                                    </div>
                                    <div class="small-drawer-status-content">videos</div>
                            </div>
                        </li>

                    </ul>
                </div>

                <div class="scrollable-content" id="scrollable-content">
                    <div class="status-box" id="topheader-profile-status" >
                        <div class="status-imgbox" id="change-profile-first">
                            <div class="status-image-box">
                                {% if user.is_authenticated %}
                                    {% if user.profile_image %}
                                        <img src="{{user.profile_image.url}}" class="cover">
                                    {% elif user.google_profile_image %}
                                        <img src="{{user.google_profile_image }}" class="cover">
                                    {% else %}
                                        <img src="/static/images/profile.png" class="cover">
                                    {% endif %}
                                {% endif %}
                               
                            </div>
                            <div class="add-icon-top">
                               +
                            </div>
                        </div>
                       
                        <div class="status-details">
                            <span class="status-details-top">My Status</span>
                            <span class="status-details-bottom">Click to add status update</span>
                        </div>
                    </div>

                    <div class="status-box" id="topheader-profile-status-second">
                        <div class="status-boxs-image" style="margin-right: 30px;">
                            <svg width="48" height="48" viewBox="0 0 104 104">
                                <circle cx="52" cy="52" r="50" fill="none" stroke-linecap="round" stroke-dashoffset="50" 
                                stroke-dasharray="" stroke-width="4" style="stroke: #008069;" id="Unviewed" ></circle>
                                <circle cx="52" cy="52" r="50" fill="none" stroke-linecap="round" stroke-dashoffset="387.69908169872417" 
                                stroke-dasharray="" stroke-width="4" style="stroke: #bbbec4;" id="Viewed"></circle> 
                            </svg>
                            <div class="status-boxs-img-second">
                                <div class="status-boxs-final-imag" id="status-boxs-final-imag" ></div>
                            </div>
                        </div>
                        <div class="status-details">
                            <span class="status-details-top">My Status</span>
                            <span class="status-details-bottom" id="profile_Status_Second_details">Click to add status update</span>
                        </div>
                    </div>

                     <div class="status-titleBox"  id="show_recent_status" style="display:none;">
                        <div class="status-title">Recent</div>   
                     </div>


                     <div class="status-box-container" id="recent-status-container">
                        <!-- Recent statuses will be appended here dynamically -->
                       
                    </div>
                     
                     
                     <div class="status-titleBox" id="show_viewed_status" style="display: none;">
                        <div class="status-title">VIEWED</div>   
                     </div>

                     <div class="status-box-container" id="viewed-status-container">
                        <!-- Viewed statuses will be appended here dynamically -->
                         
                    </div>

                     
                </div>

               

            </div>

            <!-- New Drawer for Profile -->
            <div class="leftside-drawer border_left" id="user_profile">
                <div class="drawer-header">
                    <h1>Profile</h1>
                </div>

                <div class="scrollable-content">

                    <div class="userimg_drawer">
                        <div class="profile_loader" id="profile_loader"></div>
                        <div class="overlay" alt="Profile Image" id="overlay" onclick="document.getElementById('file-input').click();">
                            <ion-icon name="camera"></ion-icon>
                            <p>CHANGE</p>
                            <p>PROFILE PHOTO</p>
                        </div>

                        {% if user.is_authenticated %}
                            {% if user.profile_image %}
                                <img id="drawer_profile_img" src="{{user.profile_image.url}}" class="cover">
                            {% elif user.google_profile_image %}
                                <img id="drawer_profile_img" src="{{user.google_profile_image }}" class="cover">
                            {% else %}
                                <img  id="drawer_profile_img" src="/static/images/profile.png" class="cover">
                            {% endif %}
                        {% endif %}
                    
                        <input type="file" id="file-input" accept="image/*" style="display: none;" onchange="profikeImgTakenByDevice(event)">
                    </div>

                    <div class="hintText">Your name</div>
   
                    <div class="name-field">
                        <span id="name-display">{{ user.username }}</span>
                        <input type="text" id="name-input" value={{ user.username }} class="hidden" />
                        <i class="fa-solid fa-arrow-rotate-right"  id="edit-icon-name-loader" style="color: #4CAF50; position: absolute; right: 30px; animation: spin 1.2s linear infinite;"></i>
                        <i class="fa-solid fa-pen" id="edit-icon-name" style="color:#8696a0; cursor: pointer;"></i>
                        <i class="fa-solid fa-check" id="check-icon-name"  style="color: #8696a0; cursor: pointer; position: absolute; right: 30px;"></i>
                    </div>
   
                    <div class="name-field-discription">
                        <p>This is not your username or PIN. This name will be visible to your Chatapp contacts.</p>
                    </div>
                   
                    <div class="hintText">Your email</div>
   
                    <div class="name-field">
                        <span id="email-display">{{ user.email }}</span>
                        <input type="text" id="email-input" value={{ user.email }} class="hidden" />
                        <i class="fa-solid fa-arrow-rotate-right" id="edit-icon-email-loader" style="color: #4CAF50; position: absolute; right: 30px; animation: spin 1.2s linear infinite;"></i>
                        <i class="fa-solid fa-pen" id="edit-icon-email" style="color:#8696a0; cursor: pointer;"></i>
                        <i class="fa-solid fa-check" id="check-icon-email"  style="color: #8696a0; cursor: pointer; position: absolute; right: 30px;"></i>
                    </div>
   
                    <div class="logout-container">
                        <button id="logout-button" class="logout-button">Logout</button>
                    </div>


                </div>

            </div>
            
       </div>
         

       <!--Status imag and video geting preview container-->
       <div class="imag-preview-containers" id="imgPreview-containers" style="height:100%">
            <div  style="display: contents;" >
                <ion-icon name="close-outline" id="closeStausImgandVidPreview" style="
                position: absolute;
                top: 10px;
                left: 10px;
                color: #AEBAC1;
                width: 30px;
                height: 30px;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                font-size: 100%;
                font-weight: bold;
                font: inherit;
                "></ion-icon>

                <div class="status-take-file-previews">
                    
                </div>

                 <div class="caption_input">
                    <input type="text" placeholder="Add a caption" id="status-caption-input">
                    <ion-icon name="close-outline" style="margin: 0px 20px;"; class="caption-close" id="status-caption-close"></ion-icon>
                </div>

                <div class="status_preview_bottoms">
                    <div class="send-images">
                        <div class="status-multiple-files" >
            
                        </div>
                        <button class="imgAddBtn">
                            <label for="add-more-pho-vid">
                                <ion-icon name="add-sharp"></ion-icon>
                            </label>
                            <input type="file" id="add-more-pho-vid" accept="image/*,video/mp4,video/3gpp,video/quicktime" multiple="" style="display: none;" onchange="handlePhotoAndVideoCapture(event);">
                        </button>
                    </div>
                    <div class="send_button" id="status_upload_send">
                        <ion-icon name="send"></ion-icon>
                    </div>
                </div>
 

            </div>
       </div> 

        <!--My Status viewer dialog box-->
        <div class="mystatus_dialog" style="display: none;">

            <div class="dialog">
                <div class="dialog_header">
                    <div class="dialog_header_content">
                        <svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" fill="currentColor" enable-background="new 0 0 24 24"><title>x</title><path d="M19.6004 17.2L14.3004 11.9L19.6004 6.60005L17.8004 4.80005L12.5004 10.2L7.20039 4.90005L5.40039 6.60005L10.7004 11.9L5.40039 17.2L7.20039 19L12.5004 13.7L17.8004 19L19.6004 17.2Z"></path></svg>
                        <div class="dialog_header_title">
                            <h1>
                                Viewed by 7
                            </h1>
                        </div>
                    </div>
                </div>
                <div class="dialog_content" >
                   
                   
                </div>
            </div>

        </div>

       <!--Status Viewed-->
        <div class="status-viewBox" id="status-viewBox" style="display:none;">

            <button class="status-viewBox-close" id="status-viewBox-close">
                <span aria-hidden="true" data-icon="x-viewer" class=""><svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24"><title>x-viewer</title><path fill="currentColor" d="M19.8,5.8l-1.6-1.6L12,10.4L5.8,4.2L4.2,5.8l6.2,6.2l-6.2,6.2l1.6,1.6l6.2-6.2l6.2,6.2l1.6-1.6L13.6,12 L19.8,5.8z"></path></svg></span>           
            </button>

            <button class="status-viewBox-arrow" id="status-viewBox-arrow">
                <svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24"><title>back</title><path fill="currentColor" d="M12,4l1.4,1.4L7.8,11H20v2H7.8l5.6,5.6L12,20l-8-8L12,4z"></path></svg>
            </button>

            <div class="status-viewBox-leftside" id="status-move-leftside"></div>
            <div class="status-viewBox-leftside-arrow" >
                    <svg  viewBox="0 0 30 30" height="30" width="30" preserveAspectRatio="xMidYMid meet" class="" x="0px" y="0px"><title>chevron</title><path fill="currentColor" d="M11,21.212L17.35,15L11,8.65l1.932-1.932L21.215,15l-8.282,8.282L11,21.212z"></path></svg>
            </div>

            <div class="status-viewBox-rightside" id="status-move-rightside"></div>
            <div class="status-viewBox-rightside-arrow" >
                    <svg  viewBox="0 0 30 30" height="30" width="30" preserveAspectRatio="xMidYMid meet" class="" x="0px" y="0px" ><title>chevron</title><path fill="currentColor" d="M11,21.212L17.35,15L11,8.65l1.932-1.932L21.215,15l-8.282,8.282L11,21.212z"></path></svg>
            </div>

                <div class="status-viewBox-center">
                    <div class="status-viewBox-profile-head">
                        <div class="status-viewBox-profile-img">
                            <div class="status-viewBox-profile-img-second">
                                <img id="mystatus_profile_img" src="/media/product_images/ai-generated-8845454_1280_sS142qw.jpg">
                            </div>
                        </div>

                        <div class="status-viewBox-profile-details">
                            <div class="status-viewBox-profile-details-top">
                                <div class="status-viewBox-profile-details-second">
                                    <div class="status-viewBox-profile-details-third">
                                        <span id="mystatus_profile_name">Jatin koladiya</span>
                                    </div>
                                </div>
                               
                            </div>
                            <div class="status-viewBox-profile-details-bottom">
                                <div id="mystatus_profile_time">Yesterday at 19:34</div>
                            </div>
                        </div> 

                        <div class="status-viewBox-profile-icons">
                            <div class="status-viewBox-profile-icons-sets">
                                <svg id="mystatus_play" viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" fill="none">
                                    <title>status-media-controls-pause</title>
                                    <rect x="8" y="6" width="3" height="12" fill="currentColor"></rect>
                                    <rect x="13" y="6" width="3" height="12" fill="currentColor"></rect>
                                  </svg>                                
                                <svg id="mystatus_pause" style="display: none;" viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" fill="none" ><title>status-media-controls-play</title><path d="M8 6.81976V17.1798C8 17.9698 8.87 18.4498 9.54 18.0198L17.68 12.8398C18.3 12.4498 18.3 11.5498 17.68 11.1498L9.54 5.97976C8.87 5.54976 8 6.02976 8 6.81976Z" fill="currentColor"></path></svg>
                                <div style="width:8px;"></div>
                                <svg id="mystatus_mute" viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>status-media-controls-volume-on</title><path fill-rule="evenodd" clip-rule="evenodd" d="M14 4.65204V4.45204C14 3.82204 14.63 3.37204 15.21 3.60204C18.6 4.89204 21 8.16204 21 12.002C21 15.842 18.6 19.112 15.21 20.402C14.63 20.622 14 20.182 14 19.552V19.352C14 18.972 14.24 18.642 14.6 18.502C17.18 17.472 19 14.942 19 12.002C19 9.06204 17.18 6.53204 14.6 5.50204C14.25 5.36204 14 5.03204 14 4.65204ZM3 10.002V14.002C3 14.552 3.45 15.002 4 15.002H7L10.29 18.292C10.92 18.922 12 18.472 12 17.582V6.41204C12 5.52204 10.92 5.07204 10.29 5.70204L7 9.00204H4C3.45 9.00204 3 9.45204 3 10.002ZM16.5 12.002C16.5 10.232 15.48 8.71204 14 7.97204V16.022C15.48 15.292 16.5 13.772 16.5 12.002Z" fill="currentColor"></path></svg> 
                                <svg id="mystatus_unmute" style="display: none;" viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>status-media-controls-volume-off</title><path d="M3.63 3.6299C3.24 4.0199 3.24 4.6499 3.63 5.0399L7.29 8.6999L7 8.9999H4C3.45 8.9999 3 9.4499 3 9.9999V13.9999C3 14.5499 3.45 14.9999 4 14.9999H7L10.29 18.2899C10.92 18.9199 12 18.4699 12 17.5799V13.4099L16.18 17.5899C15.69 17.9599 15.16 18.2699 14.58 18.4999C14.22 18.6499 14 19.0299 14 19.4199C14 20.1399 14.73 20.5999 15.39 20.3299C16.19 19.9999 16.94 19.5599 17.61 19.0199L18.95 20.3599C19.34 20.7499 19.97 20.7499 20.36 20.3599C20.75 19.9699 20.75 19.3399 20.36 18.9499L5.05 3.6299C4.66 3.2399 4.03 3.2399 3.63 3.6299ZM19 11.9999C19 12.8199 18.85 13.6099 18.59 14.3399L20.12 15.8699C20.68 14.6999 21 13.3899 21 11.9999C21 8.1699 18.6 4.8899 15.22 3.5999C14.63 3.3699 14 3.8299 14 4.4599V4.6499C14 5.0299 14.25 5.3599 14.61 5.4999C17.18 6.5399 19 9.0599 19 11.9999ZM10.29 5.7099L10.12 5.8799L12 7.7599V6.4099C12 5.5199 10.92 5.0799 10.29 5.7099ZM16.5 11.9999C16.5 10.2299 15.48 8.7099 14 7.9699V9.7599L16.48 12.2399C16.49 12.1599 16.5 12.0799 16.5 11.9999Z" fill="currentColor"></path></svg>
                                <svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24"><title>menu</title><path fill="currentColor" d="M12,7c1.104,0,2-0.896,2-2c0-1.105-0.895-2-2-2c-1.104,0-2,0.894-2,2 C10,6.105,10.895,7,12,7z M12,9c-1.104,0-2,0.894-2,2c0,1.104,0.895,2,2,2c1.104,0,2-0.896,2-2C13.999,9.895,13.104,9,12,9z M12,15 c-1.104,0-2,0.894-2,2c0,1.104,0.895,2,2,2c1.104,0,2-0.896,2-2C13.999,15.894,13.104,15,12,15z"></path></svg>
                            </div>
                        </div>
                    </div>

                    <div class="type_reply_shadow" style="display: none;"></div>
                     
                    <div class="status-viewBox-top-blackShadow"></div>

                    <div class="status-viewBox-top-calculation-lines">
                       
                    </div>

                    <div class="status-viewBox-background-them" style="background-image: url(/media/product_images/ai-generated-8845454_1280_sS142qw.jpg);"></div>

                    <div class="status-viewBox-show-status">
                        <div class="status-viewBox-show-status-first">
                            <div class="status-viewBox-show-status-second">
                                <img src="/media/product_images/ai-generated-8845454_1280_sS142qw.jpg" alt="">
                                <video>
                                    <source  type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                            </div>

                            <div class="status-viewBox-show-mystatus-status-bottom">
                                <div  class="status-viewBox-show-mystatus-content">
                                </div>
                                <div class="status-viewBox-show-mystatus-viewedCount">
                                    <div class="status-viewBox-show-mystatus-viewedCount-items">
                                        <svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>visibility-on</title><path fill-rule="evenodd" clip-rule="evenodd" d="M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17ZM9 12C9 10.34 10.34 9 12 9C13.66 9 15 10.34 15 12C15 13.66 13.66 15 12 15C10.34 15 9 13.66 9 12Z" fill="currentColor"></path></svg>
                                        <div>8</div>
                                    </div>
                                 </div>
                            </div> 

                        </div>

                       
 
                        
                    </div>   

                    

                    
                    <div class="status-viewBox-show-status-bottom" >
                        <div class="status-viewBox-show-status-bottom-under">
                            <div class="status-viewBox-show-status-bottom-under2">

                                <div style="padding: right 12px;">
                                        <div class="status-viewBox-show-status-bottom-icons">
                                            <button class="status-viewBox-show-status-bottom-icns">
                                                <svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24" style="transform: translateX(0px);"><title>smiley</title><path fill="currentColor" d="M9.153,11.603c0.795,0,1.439-0.879,1.439-1.962S9.948,7.679,9.153,7.679 S7.714,8.558,7.714,9.641S8.358,11.603,9.153,11.603z M5.949,12.965c-0.026-0.307-0.131,5.218,6.063,5.551 c6.066-0.25,6.066-5.551,6.066-5.551C12,14.381,5.949,12.965,5.949,12.965z M17.312,14.073c0,0-0.669,1.959-5.051,1.959 c-3.505,0-5.388-1.164-5.607-1.959C6.654,14.073,12.566,15.128,17.312,14.073z M11.804,1.011c-6.195,0-10.826,5.022-10.826,11.217 s4.826,10.761,11.021,10.761S23.02,18.423,23.02,12.228C23.021,6.033,17.999,1.011,11.804,1.011z M12,21.354 c-5.273,0-9.381-3.886-9.381-9.159s3.942-9.548,9.215-9.548s9.548,4.275,9.548,9.548C21.381,17.467,17.273,21.354,12,21.354z  M15.108,11.603c0.795,0,1.439-0.879,1.439-1.962s-0.644-1.962-1.439-1.962s-1.439,0.879-1.439,1.962S14.313,11.603,15.108,11.603z"></path></svg>
                                            </button>

                                            <button class="status-viewBox-show-status-bottom-icns">
                                                <svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24" style="transform: translateX(42px);"><title>sticker</title><path fill="currentColor" d="M21.799,10.183c-0.002-0.184-0.003-0.373-0.008-0.548c-0.02-0.768-0.065-1.348-0.173-1.939 c-0.124-0.682-0.328-1.296-0.624-1.87c-0.301-0.587-0.695-1.124-1.171-1.594c-0.473-0.469-1.016-0.859-1.614-1.159 c-0.576-0.291-1.196-0.493-1.887-0.615c-0.59-0.106-1.174-0.15-1.961-0.171c-0.318-0.008-3.607-0.012-4.631,0 c-0.798,0.02-1.383,0.064-1.975,0.17C7.066,2.58,6.446,2.781,5.867,3.073c-0.596,0.299-1.139,0.69-1.614,1.16 C3.78,4.7,3.386,5.236,3.082,5.826C2.788,6.398,2.584,7.012,2.459,7.694C2.352,8.285,2.307,8.88,2.286,9.635 C2.278,9.912,2.27,12.517,2.27,12.517c0,0.52,0.008,1.647,0.016,1.925c0.02,0.755,0.066,1.349,0.172,1.938 c0.126,0.687,0.33,1.3,0.624,1.871c0.303,0.59,0.698,1.126,1.173,1.595c0.473,0.469,1.017,0.859,1.614,1.159 c0.578,0.291,1.197,0.492,1.887,0.615c0.085,0.015,0.171,0.029,0.259,0.041c0.479,0.068,0.833,0.087,1.633,0.108 c0.035,0.001,2.118-0.024,2.578-0.035c1.667-0.04,3.261-0.684,4.487-1.811c1.128-1.038,2.129-1.972,2.928-2.737 c1.242-1.19,1.99-2.806,2.097-4.528l0.066-1.052c0.001-0.296,0.001-0.499,0.001-0.668C21.806,10.915,21.8,10.2,21.799,10.183z  M18.604,16.103c-0.79,0.757-1.784,1.684-2.906,2.716c-0.588,0.541-1.292,0.919-2.044,1.154c0.051-0.143,0.116-0.276,0.145-0.433 c0.042-0.234,0.06-0.461,0.067-0.74c0.003-0.105,0.009-0.789,0.009-0.789c0.013-0.483,0.042-0.865,0.107-1.22 c0.069-0.379,0.179-0.709,0.336-1.016c0.16-0.311,0.369-0.595,0.621-0.844c0.254-0.252,0.542-0.458,0.859-0.617 c0.314-0.158,0.65-0.268,1.037-0.337c0.359-0.064,0.733-0.093,1.253-0.106c0,0,0.383,0.001,0.701-0.003 c0.301-0.008,0.523-0.025,0.755-0.066c0.186-0.034,0.348-0.105,0.515-0.169C19.806,14.568,19.311,15.425,18.604,16.103z  M20.267,11.346c-0.028,0.15-0.063,0.263-0.111,0.356c-0.06,0.116-0.128,0.211-0.208,0.29c-0.088,0.087-0.187,0.158-0.296,0.213 s-0.228,0.094-0.371,0.119c-0.141,0.025-0.298,0.037-0.52,0.043c-0.309,0.004-0.687,0.004-0.687,0.004 c-0.613,0.016-1.053,0.049-1.502,0.129c-0.527,0.094-1.002,0.249-1.447,0.473c-0.457,0.229-0.875,0.529-1.241,0.891 c-0.363,0.358-0.667,0.771-0.9,1.224C12.757,15.53,12.6,16,12.505,16.522c-0.081,0.447-0.116,0.895-0.131,1.461 c0,0-0.006,0.684-0.008,0.777c-0.006,0.208-0.018,0.37-0.043,0.511c-0.025,0.136-0.063,0.251-0.117,0.356 c-0.056,0.108-0.127,0.206-0.213,0.291c-0.088,0.087-0.187,0.158-0.296,0.213c-0.072,0.036-0.168,0.063-0.37,0.098 c-0.027,0.005-0.25,0.027-0.448,0.031c-0.021,0-1.157,0.01-1.192,0.009c-0.742-0.019-1.263-0.046-1.668-0.126 c-0.551-0.098-1.031-0.254-1.477-0.479c-0.457-0.229-0.871-0.527-1.233-0.885c-0.363-0.358-0.663-0.766-0.894-1.215 c-0.225-0.436-0.382-0.909-0.482-1.453c-0.09-0.495-0.13-1.025-0.149-1.71c-0.007-0.266-0.011-0.543-0.012-0.847 C3.769,13.262,3.777,9.94,3.784,9.675c0.02-0.685,0.061-1.214,0.151-1.712c0.098-0.54,0.256-1.012,0.481-1.45 C4.647,6.064,4.946,5.657,5.308,5.3c0.363-0.36,0.777-0.657,1.233-0.886c0.447-0.225,0.927-0.382,1.477-0.479 c0.503-0.09,1.022-0.129,1.74-0.149c1.008-0.012,4.26-0.008,4.561,0c0.717,0.019,1.236,0.058,1.737,0.148 c0.552,0.098,1.032,0.254,1.476,0.478c0.458,0.23,0.872,0.527,1.234,0.885c0.364,0.359,0.663,0.766,0.892,1.213 c0.228,0.441,0.385,0.913,0.482,1.453c0.091,0.499,0.131,1.013,0.15,1.712c0.008,0.271,0.014,1.098,0.014,1.235 C20.299,11.085,20.289,11.226,20.267,11.346z"></path></svg>                                       
                                            </button>
                                        </div>
                                    </div>

                                    <div class="status-viewBox-show-status-bottom-reply">
                                        <input type="text" class="status-viewBox-show-status-bottom-reply-input" placeholder="Type a reply…">
                                    </div>

                                    <div class="status-viewBox-show-status-bottom-reply-send">
                                        <svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="x23j0i4 xd7y6wv" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24"><title>send</title><path fill="currentColor" d="M1.101,21.757L23.8,12.028L1.101,2.3l0.011,7.912l13.623,1.816L1.112,13.845 L1.101,21.757z"></path></svg>
                                    </div>
                            </div>
                        </div>
                    </div> 

                </div>

        </div>

       


        <!-- Delete Confirmation Dialog -->
        <div class="dialog-overlay" id="deleteDialog">
            <div class="dialog-content">
            <h2>Confirm Delete</h2>
            <p>Are you sure you want to delete this receive user access and messages?</p>
            <div class="dialog-buttons">
                <button class="dialog-btn confirm-btn" id="confirmDelete">Yes, Delete</button>
                <button class="dialog-btn cancel-btn" id="cancelDelete">Cancel</button>
            </div>
            </div>
        </div>

        
       <!-- This is right side intro part --> 
       <div class="intro-right border_left">
            <div class="intro-img">
                <img src="/static/images/Group Chat-cuate.svg" alt="">
            </div>
            
       </div>


       <div class="rightside border_left">
           <div class="chat-header">
                <div class="imgText">
                    <div class="userimg">
                        <img src="/static/images/profile.png" class="cover">
                    </div> 
                    <h4>jatin koladiya<br><span id="statusText">online</span></h4>
                </div>
                <ul class="nav_icons" style="gap: 20px;">
                    <li><svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>video-call</title><path d="M3.27096 7.31042C3 7.82381 3 8.49587 3 9.84V14.16C3 15.5041 3 16.1762 3.27096 16.6896C3.5093 17.1412 3.88961 17.5083 4.35738 17.7384C4.88916 18 5.58531 18 6.9776 18H13.1097C14.502 18 15.1982 18 15.7299 17.7384C16.1977 17.5083 16.578 17.1412 16.8164 16.6896C17.0873 16.1762 17.0873 15.5041 17.0873 14.16V9.84C17.0873 8.49587 17.0873 7.82381 16.8164 7.31042C16.578 6.85883 16.1977 6.49168 15.7299 6.26158C15.1982 6 14.502 6 13.1097 6H6.9776C5.58531 6 4.88916 6 4.35738 6.26158C3.88961 6.49168 3.5093 6.85883 3.27096 7.31042Z" fill="currentColor"></path><path d="M18.7308 9.60844C18.5601 9.75994 18.4629 9.97355 18.4629 10.1974V13.8026C18.4629 14.0264 18.5601 14.2401 18.7308 14.3916L20.9567 16.3669C21.4879 16.8384 22.3462 16.4746 22.3462 15.778V8.22203C22.3462 7.52542 21.4879 7.16163 20.9567 7.63306L18.7308 9.60844Z" fill="currentColor"></path></svg></li>
                    <li><svg id="search_messages" viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24"><title>search-alt</title><path fill="currentColor" d="M15.9,14.3H15L14.7,14c1-1.1,1.6-2.7,1.6-4.3c0-3.7-3-6.7-6.7-6.7S3,6,3,9.7 s3,6.7,6.7,6.7c1.6,0,3.2-0.6,4.3-1.6l0.3,0.3v0.8l5.1,5.1l1.5-1.5L15.9,14.3z M9.7,14.3c-2.6,0-4.6-2.1-4.6-4.6s2.1-4.6,4.6-4.6 s4.6,2.1,4.6,4.6S12.3,14.3,9.7,14.3z"></path></svg></li>
                    <li><svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24"><title>menu</title><path fill="currentColor" d="M12,7c1.104,0,2-0.896,2-2c0-1.105-0.895-2-2-2c-1.104,0-2,0.894-2,2 C10,6.105,10.895,7,12,7z M12,9c-1.104,0-2,0.894-2,2c0,1.104,0.895,2,2,2c1.104,0,2-0.896,2-2C13.999,9.895,13.104,9,12,9z M12,15 c-1.104,0-2,0.894-2,2c0,1.104,0.895,2,2,2c1.104,0,2-0.896,2-2C13.999,15.894,13.104,15,12,15z"></path></svg></ion-icon></li>
                </ul> 
           </div>
           
          
           <!-- chatbox -->
            <div class="chatBox" id="chatBox">
                <div class="message sender">
                    <div class="mainImage end_background">
                        <div class="status_part" style="background-color: #025144;">
                            <span class="status_part_left-line status_part_left-line-sender"></span>
                            <div class="status_part_conntent">
                                <div class="status_part_conntent_wrap">
                                    <div class="status_part_conntent_title">
                                        <span class="span-text-sender">jatin · Status</span>
                                    </div>
                                    <div class="status_part_conntent_title_bottom">
                                        <div class="status_part_conntent_title_bottom_icon">
                                            <svg viewBox="0 0 16 20" height="20" width="16" preserveAspectRatio="xMidYMid meet" class="" version="1.1" x="0px" y="0px" enable-background="new 0 0 16 20"><title>status-video</title><path fill="currentColor" d="M15.243,5.868l-3.48,3.091v-2.27c0-0.657-0.532-1.189-1.189-1.189H1.945 c-0.657,0-1.189,0.532-1.189,1.189v7.138c0,0.657,0.532,1.189,1.189,1.189h8.629c0.657,0,1.189-0.532,1.189-1.189v-2.299l3.48,3.09 V5.868z"></path></svg>
                                        </div>
                                        <span dir="auto" style="min-height: 0px;line-height: 23px;margin-right: 3px;">00:32</span>
                                        <span dir="auto" style="min-height: 0px; line-height: 23px;">Video</span>
                                    </div>
                                </div>
                            </div>
                            <div class="status_part_img">
                                <div class="status_part_img_first">
                                    <div class="status_part_img_second" ><div class="status_part_imgview" style="background-image: url(http://127.0.0.1:8000/media/message_images/d7d2c61f-7c1c-4c43-9aa6-fe1d907aa70f.jpg);"> </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        

                    </div>
                </div>  
                
                <div class="message receiver">
                    <div class="mainImage start_background">
                        <div class="status_part" style="background-color: rgba(0, 0, 0, .2);">
                            <span class="status_part_left-line status_part_left-line-reciver"></span>
                            <div class="status_part_conntent">
                                <div class="status_part_conntent_wrap">
                                    <div class="status_part_conntent_title">
                                        <span class="span-text-reciver">jatin · Status</span>
                                    </div>
                                    <div class="status_part_conntent_title_bottom">
                                        <div class="status_part_conntent_title_bottom_icon">
                                            <svg viewBox="0 0 16 20" height="20" width="16" preserveAspectRatio="xMidYMid meet" class="" version="1.1" x="0px" y="0px" enable-background="new 0 0 16 20"><title>status-video</title><path fill="currentColor" d="M15.243,5.868l-3.48,3.091v-2.27c0-0.657-0.532-1.189-1.189-1.189H1.945 c-0.657,0-1.189,0.532-1.189,1.189v7.138c0,0.657,0.532,1.189,1.189,1.189h8.629c0.657,0,1.189-0.532,1.189-1.189v-2.299l3.48,3.09 V5.868z"></path></svg>
                                        </div>
                                        <span dir="auto" style="min-height: 0px;line-height: 23px;margin-right: 3px;">00:32</span>
                                        <span dir="auto" style="min-height: 0px; line-height: 23px;">Video</span>
                                    </div>
                                </div>
                            </div>
                            <div class="status_part_img">
                                <div class="status_part_img_first">
                                    <div class="status_part_img_second" ><div class="status_part_imgview" style="background-image: url(http://127.0.0.1:8000/media/message_images/d7d2c61f-7c1c-4c43-9aa6-fe1d907aa70f.jpg);"> </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        

                    </div>
                </div>    

            </div>

            <!--chat input-->
            <div class="chatbox_input" id="chatbox_input">
                <!-- <span id="plusUpload" ><svg viewBox="0 0 24 24" width="30" preserveAspectRatio="xMidYMid meet" class="x11xpdln x1d8287x x1h4ghdb"><title>plus</title><path fill="currentColor" d="M19,13h-6v6h-2v-6H5v-2h6V5h2v6h6V13z"></path></svg></span> -->
                <button id="plusUpload">
                    <span aria-hidden="true" data-icon="plus-rounded" class=""><svg viewBox="0 0 24 24" width="24" preserveAspectRatio="xMidYMid meet" class="x11xpdln x1d8287x x1h4ghdb" fill="none"><title>plus-rounded</title><path d="M11 13H5.5C4.94772 13 4.5 12.5523 4.5 12C4.5 11.4477 4.94772 11 5.5 11H11V5.5C11 4.94772 11.4477 4.5 12 4.5C12.5523 4.5 13 4.94772 13 5.5V11H18.5C19.0523 11 19.5 11.4477 19.5 12C19.5 12.5523 19.0523 13 18.5 13H13V18.5C13 19.0523 12.5523 19.5 12 19.5C11.4477 19.5 11 19.0523 11 18.5V13Z" fill="currentColor"></path></svg></span>
                </button>
                <button>
                    <span><svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>expressions</title><path d="M8.49893 10.2521C9.32736 10.2521 9.99893 9.5805 9.99893 8.75208C9.99893 7.92365 9.32736 7.25208 8.49893 7.25208C7.6705 7.25208 6.99893 7.92365 6.99893 8.75208C6.99893 9.5805 7.6705 10.2521 8.49893 10.2521Z" fill="currentColor"></path><path d="M17.0011 8.75208C17.0011 9.5805 16.3295 10.2521 15.5011 10.2521C14.6726 10.2521 14.0011 9.5805 14.0011 8.75208C14.0011 7.92365 14.6726 7.25208 15.5011 7.25208C16.3295 7.25208 17.0011 7.92365 17.0011 8.75208Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M16.8221 19.9799C15.5379 21.2537 13.8087 21.9781 12 22H9.27273C5.25611 22 2 18.7439 2 14.7273V9.27273C2 5.25611 5.25611 2 9.27273 2H14.7273C18.7439 2 22 5.25611 22 9.27273V11.8141C22 13.7532 21.2256 15.612 19.8489 16.9776L16.8221 19.9799ZM14.7273 4H9.27273C6.36068 4 4 6.36068 4 9.27273V14.7273C4 17.6393 6.36068 20 9.27273 20H11.3331C11.722 19.8971 12.0081 19.5417 12.0058 19.1204L11.9935 16.8564C11.9933 16.8201 11.9935 16.784 11.9941 16.7479C11.0454 16.7473 10.159 16.514 9.33502 16.0479C8.51002 15.5812 7.84752 14.9479 7.34752 14.1479C7.24752 13.9479 7.25585 13.7479 7.37252 13.5479C7.48919 13.3479 7.66419 13.2479 7.89752 13.2479L13.5939 13.2479C14.4494 12.481 15.5811 12.016 16.8216 12.0208L19.0806 12.0296C19.5817 12.0315 19.9889 11.6259 19.9889 11.1248V9.07648H19.9964C19.8932 6.25535 17.5736 4 14.7273 4ZM14.0057 19.1095C14.0066 19.2605 13.9959 19.4089 13.9744 19.5537C14.5044 19.3124 14.9926 18.9776 15.4136 18.5599L18.4405 15.5576C18.8989 15.1029 19.2653 14.5726 19.5274 13.996C19.3793 14.0187 19.2275 14.0301 19.0729 14.0295L16.8138 14.0208C15.252 14.0147 13.985 15.2837 13.9935 16.8455L14.0057 19.1095Z" fill="currentColor"></path></svg></span> 
                </button>
                <input type="text" id="messageInput" placeholder="Type a message">
                <span id="micIcon" ><svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24"><title>ptt</title><path fill="currentColor" d="M11.999,14.942c2.001,0,3.531-1.53,3.531-3.531V4.35c0-2.001-1.53-3.531-3.531-3.531 S8.469,2.35,8.469,4.35v7.061C8.469,13.412,9.999,14.942,11.999,14.942z M18.237,11.412c0,3.531-2.942,6.002-6.237,6.002 s-6.237-2.471-6.237-6.002H3.761c0,4.001,3.178,7.297,7.061,7.885v3.884h2.354v-3.884c3.884-0.588,7.061-3.884,7.061-7.885 L18.237,11.412z"></path></svg></span>
                <span id="sendIcon"><svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24"><title>send</title><path fill="currentColor" d="M1.101,21.757L23.8,12.028L1.101,2.3l0.011,7.912l13.623,1.816L1.112,13.845 L1.101,21.757z"></path></svg></span>
                
            </div>

             <!-- upoload file dropdown menu -->
             <div id="plus-dropdown-menu" class="plus-dropdown-menu">
                <ul>
                  <li>
                    <label for="photo-input">
                        <i class="fa-regular fa-images menu-icon" style="color: #007bfc;"></i> Photos
                    </label>  
                    <input type="file" id="photo-input" accept="image/*" multiple  style="display: none;" onchange="handlePhotoCapture(event)">
                  </li>
                  <li>
                    <label for="video-input">
                        <i class="fas fa-video menu-icon" style="color: #00a884;"></i> Videos
                    </label>
                    <input type="file" id="video-input" accept="video/mp4,video/3gpp,video/quicktime" multiple  style="display: none;" onchange="handleVideoCapture(event)" >
                  </li>
                  <li><i class="fas fa-comment-dots menu-icon" style="color: #B197FC;"></i> Messages</li>
                </ul>
            </div>

            <!-- Image preview and send button -->
            <div class="imag-preview-container" id="imagePreviewContainer">
               <div  style="display: contents;" id="multiple-items">
                    <ion-icon name="close-outline"  id="imagePreviewClose"></ion-icon>
                    <div class="image-preview">
                    
                    </div>
                    <div class="caption_input">
                        <input type="text" id="captinoInput" placeholder="Add a caption">
                        <ion-icon name="close-outline" class="caption-close"  id="caption-close"></ion-icon>
                    </div>

                    <div class="preview_bottom">
                        <div class="send-images">
                            <div class="multiple-image" id="multiple-image">
                
                            </div>
                            <button class="imgAddBtn">
                                <label for="addmoreImg">
                                    <ion-icon name="add-sharp"></ion-icon>
                                    <span><svg viewBox="0 0 24 24" width="30" preserveAspectRatio="xMidYMid meet" class="x11xpdln x1d8287x x1h4ghdb"><title>plus</title><path fill="currentColor" d="M19,13h-6v6h-2v-6H5v-2h6V5h2v6h6V13z"></path></svg></span>
                                </label>
                            </button>
                        </div>
                        <div class="send_button">
                            <span id="sendFiles"><svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24"><title>send</title><path fill="currentColor" d="M1.101,21.757L23.8,12.028L1.101,2.3l0.011,7.912l13.623,1.816L1.112,13.845 L1.101,21.757z"></path></svg></span>
                        </div>
                    </div>

               </div> 
               <div class="loader" id="loader"></div>
            </div>
            
        </div> 

        <!-- message side bar -->
        <div id="message_search_side" style="display: none;" class="message_search_side">
            <div class="header">
                <svg  id="message_side_close" viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" fill="currentColor" enable-background="new 0 0 24 24"><title>x</title><path d="M19.6004 17.2L14.3004 11.9L19.6004 6.60005L17.8004 4.80005L12.5004 10.2L7.20039 4.90005L5.40039 6.60005L10.7004 11.9L5.40039 17.2L7.20039 19L12.5004 13.7L17.8004 19L19.6004 17.2Z"></path></svg>
                <h1>Search messages</h1>
            </div>
            
            <div class="search_date">
                <div style="position: relative;">
                    <button class="search_date_button" id="toggle_Calendar">
                        <svg viewBox="0 0 24 24" height="20" preserveAspectRatio="xMidYMid meet"  fill="none"><title>calendar-empty</title><path fill-rule="evenodd" clip-rule="evenodd" d="M19 3H20C21.1 3 22 3.9 22 5V21C22 22.1 21.1 23 20 23H4C2.9 23 2 22.1 2 21V5C2 3.9 2.9 3 4 3H5V2C5 1.45 5.45 1 6 1C6.55 1 7 1.45 7 2V3H17V2C17 1.45 17.45 1 18 1C18.55 1 19 1.45 19 2V3ZM5 21H19C19.55 21 20 20.55 20 20V8H4V20C4 20.55 4.45 21 5 21Z" fill="currentColor"></path></svg>
                    </button>

                    <!-- calender -->
                    <div id="calender" class="calender">
                        <div class="calender_header">
                            <button id="prevBtn">‹</button>
                            <div class="monthYear" style="color: white;" id="monthYear">March 2025</div>
                            <button class="nextBtn" id="nextBtn">›</button>
                        </div>
                        <div  class="days">
                            <div class="day">Mon</div>
                            <div class="day">Tue</div>
                            <div class="day">Wed</div>
                            <div class="day">Thu</div>
                            <div class="day">Fri</div>
                            <div class="day">Sat</div>
                            <div class="day">Sun</div>
    
                        </div>
                        <div class="dates" id="dates"></div>
                    </div>
                </div>
                
                 
                <div class="message_search_side_search">
                    <div>
                        <span  id="message_search_icon" class="search_icon"><svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24"><title>search</title><path fill="currentColor" d="M15.009,13.805h-0.636l-0.22-0.219c0.781-0.911,1.256-2.092,1.256-3.386 c0-2.876-2.332-5.207-5.207-5.207c-2.876,0-5.208,2.331-5.208,5.207s2.331,5.208,5.208,5.208c1.293,0,2.474-0.474,3.385-1.255 l0.221,0.22v0.635l4.004,3.999l1.194-1.195L15.009,13.805z M10.201,13.805c-1.991,0-3.605-1.614-3.605-3.605 s1.614-3.605,3.605-3.605s3.605,1.614,3.605,3.605S12.192,13.805,10.201,13.805z"></path></svg></span>
                        <span id="message_search_right_arrow" style="color: #00a884;" class="search_icon"><svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24"><title>back</title><path fill="currentColor" d="M12,4l1.4,1.4L7.8,11H20v2H7.8l5.6,5.6L12,20l-8-8L12,4z"></path></svg></span>
                        <input id="message_search_input" type="text" id="drawer-search-input" placeholder="Search">
                        <span  id="message_search_close" class="cancel_icon">
                            <svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" version="1.1" x="0px" y="0px" enable-background="new 0 0 24 24"><title>x-alt</title><path fill="currentColor" d="M17.25,7.8L16.2,6.75l-4.2,4.2l-4.2-4.2L6.75,7.8l4.2,4.2l-4.2,4.2l1.05,1.05l4.2-4.2l4.2,4.2l1.05-1.05 l-4.2-4.2L17.25,7.8z"></path></svg>
                        </span>
                    </div>
                </div>
            </div>

            <div class="suggestion_text" id="suggestion_text_show">
                <div class="suggestion_text_under">
                    <span id="noResultsMessage">Search for messages with Shraddha Mami.</span>
                </div>
            </div>

            <div id="search_data" class="search_data">
                
            </div>
            
        </div>
 
        <!--File Videw Message-->
        <div class="file_view" id="file_view">
            <div class="file_view_top">
                <div class="file_view_top_left"></div>
                <div class="file_view_top_right">
                    <span id="file_view_close"><svg viewBox="0 0 24 24" height="24" width="24" preserveAspectRatio="xMidYMid meet" class="" fill="none"><title>close-refreshed</title><path d="M11.9998 13.4L7.0998 18.3C6.91647 18.4833 6.68314 18.575 6.3998 18.575C6.11647 18.575 5.88314 18.4833 5.6998 18.3C5.51647 18.1167 5.4248 17.8833 5.4248 17.6C5.4248 17.3167 5.51647 17.0833 5.6998 16.9L10.5998 12L5.6998 7.09999C5.51647 6.91665 5.4248 6.68332 5.4248 6.39999C5.4248 6.11665 5.51647 5.88332 5.6998 5.69999C5.88314 5.51665 6.11647 5.42499 6.3998 5.42499C6.68314 5.42499 6.91647 5.51665 7.0998 5.69999L11.9998 10.6L16.8998 5.69999C17.0831 5.51665 17.3165 5.42499 17.5998 5.42499C17.8831 5.42499 18.1165 5.51665 18.2998 5.69999C18.4831 5.88332 18.5748 6.11665 18.5748 6.39999C18.5748 6.68332 18.4831 6.91665 18.2998 7.09999L13.3998 12L18.2998 16.9C18.4831 17.0833 18.5748 17.3167 18.5748 17.6C18.5748 17.8833 18.4831 18.1167 18.2998 18.3C18.1165 18.4833 17.8831 18.575 17.5998 18.575C17.3165 18.575 17.0831 18.4833 16.8998 18.3L11.9998 13.4Z" fill="currentColor"></path></svg></span>
                </div>
            </div>
            <div class="file_view_center">
                <div class="file">
                
                </div>
            </div>

        </div>
       
       
   
    </div>
    <script>
    
    var djangoUserId = "{{ user.id }}";
    document.addEventListener("DOMContentLoaded", function(){
        const statusBox = document.getElementById("status-boxs-final-imag");
        const userProfileImage = "{% if user.profile_image %}{{ user.profile_image.url }}{% elif user.google_profile_image %}{{ user.google_profile_image }}{% else %}/static/images/profile.png{% endif %}";
        const defaultImage = "/static/images/profile.png";

        if (userProfileImage) {
            statusBox.style.backgroundImage = `url('${userProfileImage}')`;
        } else {
            statusBox.style.backgroundImage = `url('${defaultImage}')`;
        }
    });
    
    </script>
    <script src="{% static 'js\index.js' %}"></script>
    <script src="{% static 'js\calender.js' %}"></script>
    
</body>
</html>

